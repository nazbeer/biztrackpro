{% extends 'base.html' %}

{% block title %}Create Daily Summary{% endblock %}

{% block content %}
<style>
    .bg-white{
        background-color: #fff !important;
    }
    .br-5{
        border-radius: 5px !important;
    }
</style>
<div class="container ">
    <div class="card  ">
        <div class="card-header">
            <h5 class="mb-0">Create Daily Summary</h5>
          </div>
          <form method="post">
        <div class="card-body ">
            {% csrf_token %}
            <div class="card">
                <div class="card-body bg-white br-5">
                    <div class="row mb-3">
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="id_date">Date:</label>
                                <input type="date" name="date" required class="form-control bg-light" id="id_date" tabindex="-1">   
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="id_date">Cash on Hand:</label>
                                <input type="number" name="cash_on_hand" required class="form-control bg-light" id="id_cash_on_hand" tabindex="0">   
                            </div>
                        </div>
                    </div>
                    <h3 class="text-center ">Sale</h3>
                    <div class="row ">
                        <div class="col-md-4">
                            <label>Cash Sale</label>
                            <input type="number" name="cash_sale" required class="form-control bg-light" id="id_cash_sale" tabindex="1"> 
                            
                        </div>
                        <div class="col-md-4">
                            <label>Credit Sale</label>
                            <input type="number" name="credit_sale" required class="form-control bg-light" id="id_credit_sale" tabindex="2"> 
                        </div>
                        <div class="col-md-4">
                            <label>Card Sale</label>
                            <input type="number" name="card_sale" required class="form-control bg-light" id="id_card_sale" tabindex="3"> 
                        </div>
                    </div>
                    <div class="row mb-3 mt-2">
                        <div class="col-md-4 ">
                            <label>Bank</label>
                            <div class="bg-light p-2 rounded">58500.00</div>
                        </div>
                        <div class="col-md-4 d-flex align-items-end">
                            <button type="button" class="btn btn-success mt-3" data-toggle="modal" data-target="#bankSaleModal">Add Bank Sale</button>
                        </div>
                    </div>
                    <table class="table table-bordered">
                        <thead class="thead-light">
                            <tr>
                                <th>Customer</th>
                                <th>Transaction Mode</th>
                                <th>Bank</th>
                                <th>Amount</th>
                                <th>Dep. Date</th>
                                <th>Chq. Date</th>
                                
                                <th>Chq No.</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for sale in bank_sales %}
                            <tr>
                                <td>{{ sale.customer.name }}</td>
                                <td>{{ sale.mode_of_transaction.name }}</td>
                                <td>{{ sale.bank.name }}</td>
                                <td>{{ sale.amount }}</td>
                                <td>{{ sale.created_on|date:"d/m/Y" }}</td>
                                <td>{{ sale.cheque_date|date:"d/m/Y" }}</td>
                                <td>{{ sale.cheque_no }}</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="card  mt-4">
                <div class="card-body bg-white  br-5">
                    <h3 class="text-center">Credit Collection</h3>
                    <div class="row mb-4">
                        <div class="col-md-4">
                            <label>Cash</label>
                            <div class="bg-light p-2 rounded">16750.00</div>
                        </div>
                        <div class="col-md-4">
                            <label>Card</label>
                            <div class="bg-light p-2 rounded">15000.00</div>
                        </div>
                        <div class="col-md-4">
                            <label>Bank</label>
                            <div class="bg-light p-2 rounded">8500.00</div>
                        </div>
                        <div class="col-md-4 d-flex align-items-end">
                            <button type="button" class="btn btn-success mt-3" data-toggle="modal" data-target="#creditCollectionModal">Add Credit Collection</button>
                        </div>
                    </div>
                    <table class="table table-bordered">
                        <thead class="thead-light">
                            <tr>
                                <th>Type</th>
                                <th>Bank</th>
                                <th>Amount</th>
                                <th>Dep. Date</th>
                                <th>Chq. Date</th>
                                <th>Bank</th>
                                <th>Chq No.</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Cheque</td>
                                <td>ADIB</td>
                                <td>10000.00</td>
                                <td>12/06/24</td>
                                <td>12/05/24</td>
                                <td>Al Hilal</td>
                                <td>154632</td>
                            </tr>
                            <tr>
                                <td>Cash</td>
                                <td>ADCB</td>
                                <td>8500.00</td>
                                <td>23/05/24</td>
                                <td></td>
                                <td></td>
                                <td></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <div class="card-footer mb-0">
            <div class="form-group d-flex justify-content-center align-items-center gap-3 mb-0">
                <button type="submit" class="btn btn-primary">Submit</button>
                <button type="submit" class="btn btn-warning">Save</button>
                <a href="{% url 'daily_summary_list' %}" class="btn btn-secondary">Reset</a>
            </div>
        </div>
    </form>
    </div>
</div>
<div class="container d-none">
  <div class="card">
    <div class="card-header">
      <h5 class="mb-0">Create Daily Summary</h5>
    </div>
    <form method="post">
    <div class="card-body">
      
        {% csrf_token %}
        <!-- {{ form.as_p }} -->
        <div class="row">
            
            <div class="col-md-6">
                <div class="form-group">
                    <label for="id_date">Date:</label>
                    <input type="date" name="date" required class="form-control" id="id_date" tabindex="-1">   
                </div>
            </div>
            <div class="col-md-6">
                <div class="form-group">
                    <label for="id_date">Cash on Hand:</label>
                    <input type="number" name="cash_on_hand" required class="form-control" id="id_cash_on_hand" tabindex="0">   
                </div>
            </div>

        </div>
       
      
      <!-- Buttons to trigger various modals -->
      <button type="button" class="btn btn-success mt-3" data-toggle="modal" data-target="#bankSaleModal">Add Bank Sale</button>
      <button type="button" class="btn btn-success mt-3" data-toggle="modal" data-target="#creditCollectionModal">Add Credit Collection</button>
      <button type="button" class="btn btn-success mt-3" data-toggle="modal" data-target="#miscIncomeModal">Add Miscellaneous Income</button>
      <button type="button" class="btn btn-success mt-3" data-toggle="modal" data-target="#purchaseModal">Add Purchase</button>
      <button type="button" class="btn btn-success mt-3" data-toggle="modal" data-target="#supplierPaymentModal">Add Supplier Payment</button>
      <button type="button" class="btn btn-success mt-3" data-toggle="modal" data-target="#expenseModal">Add Expense</button>
      <button type="button" class="btn btn-success mt-3" data-toggle="modal" data-target="#bankDepositModal">Add Bank Deposit</button>
    
    </div>
    <div class="card-footer mb-0">
        <div class="form-group d-flex justify-content-center align-items-center gap-3 mb-0">
            <button type="submit" class="btn btn-primary">Submit</button>
            <button type="submit" class="btn btn-warning">Save</button>
            <a href="{% url 'daily_summary_list' %}" class="btn btn-secondary">Reset</a>
        </div>
    </div>
    </form>
  </div>
</div>

<!-- Bank Sale -->
<div class="modal fade" id="bankSaleModal" tabindex="-1" aria-labelledby="bankSaleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header bg-dark text-white">
        <h5 class="modal-title text-white" id="bankSaleModalLabel">Add Bank Sale</h5>
        <button type="button" class="close text-white" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <form id="bankSaleForm" method="post" action="{% url 'create_bank_sale' %}">
        <div class="modal-body">
          {% csrf_token %}
          <div class="row">
            <div class="col-md-6">
              <div class="form-group">
                <label for="id_customer">Customer</label>
                <select id="id_customer" name="customer" class="form-control" tabindex="0">
                  <option>-- Select Customer --</option>
                  {% for customer in bank_sale_form.customer.field.queryset %}
                    <option value="{{ customer.id }}">{{ customer.name }}</option>
                  {% endfor %}
                </select>
              </div>
              <div class="form-group">
                <label for="id_amount">Amount</label>
                <input type="number" id="id_amount" name="amount" class="form-control" step="0.01" tabindex="2">
              </div>
              <div class="form-group">
                <label for="id_cheque_date">Cheque Date</label>
                <input type="date" id="id_cheque_date" name="cheque_date" class="form-control" tabindex="4">
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-group">
                <label for="id_mode_of_transaction">Mode of Transaction</label>
                <select id="id_mode_of_transaction" name="mode_of_transaction" class="form-control" tabindex="1">
                  <option>-- Mode of Transaction --</option>
                  {% for transaction_mode in bank_sale_form.mode_of_transaction.field.queryset %}
                    <option value="{{ transaction_mode.id }}">{{ transaction_mode.name }}</option>
                  {% endfor %}
                </select>
              </div>
              <div class="form-group">
                <label for="id_bank">Bank</label>
                <select id="id_bank" name="bank" class="form-control" tabindex="3">
                  <option>-- Select Bank --</option>
                  {% for bank in bank_sale_form.bank.field.queryset %}
                    <option value="{{ bank.id }}">{{ bank.name }}</option>
                  {% endfor %}
                </select>
              </div>
              <div class="form-group">
                <label for="id_cheque_no">Cheque Number</label>
                <input type="text" id="id_cheque_no" name="cheque_no" class="form-control" tabindex="5">
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer bg-white ">
          <button type="submit" class="btn btn-primary" tabindex="6">Save</button>
        </div>
      </form>
    </div>
  </div>
</div>


<!-- Credit Collection Modal -->
<div class="modal fade" id="creditCollectionModal" tabindex="-1" aria-labelledby="creditCollectionModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header bg-dark text-white">
          <h5 class="modal-title text-white" id="creditCollectionModalLabel">Add Credit Collection</h5>
          <button type="button" class="close text-white" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <form id="creditCollectionForm" method="post" action="{% url 'create_credit_collection' %}">
          <div class="modal-body">
            {% csrf_token %}
            <div class="row">
              <div class="col-md-6">
                <div class="form-group">
                  <label for="id_customer">Customer</label>
                  <select id="id_customer" name="customer" class="form-control" tabindex="0">
                    <option>-- Select Customer --</option>
                    {% for customer in credit_collection_form.customer.field.queryset %}
                      <option value="{{ customer.id }}">{{ customer.name }}</option>
                    {% endfor %}
                  </select>
                </div>
                <div class="form-group">
                  <label for="id_amount">Amount</label>
                  <input type="number" id="id_amount" name="amount" class="form-control" step="0.01" tabindex="2">
                </div>
                <div class="form-group">
                  <label for="id_cheque_date">Cheque Date</label>
                  <input type="date" id="id_cheque_date" name="cheque_date" class="form-control" tabindex="4">
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <label for="id_payment_mode">Payment Mode</label>
                  <select id="id_payment_mode" name="payment_mode" class="form-control" tabindex="1">
                    <option>-- Select Payment Mode --</option>
                    {% for payment_mode in credit_collection_form.payment_mode.field.queryset %}
                      <option value="{{ payment_mode.id }}">{{ payment_mode.name }}</option>
                    {% endfor %}
                  </select>
                </div>
                <div class="form-group">
                  <label for="id_bank">Bank</label>
                  <select id="id_bank" name="bank" class="form-control" tabindex="3">
                    <option>-- Select Bank --</option>
                    {% for bank in credit_collection_form.bank.field.queryset %}
                      <option value="{{ bank.id }}">{{ bank.name }}</option>
                    {% endfor %}
                  </select>
                </div>
                <div class="form-group">
                  <label for="id_cheque_no">Cheque Number</label>
                  <input type="text" id="id_cheque_no" name="cheque_no" class="form-control" tabindex="5">
                </div>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button type="submit" class="btn btn-primary" tabindex="6">Save</button>
          </div>
        </form>
      </div>
    </div>
  </div>
  
<!-- Repeat similar structure for other modals: Credit Collection, Miscellaneous Income, Purchase, Supplier Payment, Expense, Bank Deposit -->

{% endblock %}

{% block extra_scripts %}
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.bundle.min.js"></script>
{% endblock %}
