{% extends 'base.html' %}

{% block title %}Create Daily Summary{% endblock %}

{% block content %}
<style>
    .bg-white{
        background-color: #fff !important;
    }
    .br-5{
        border-radius: 5px !important;
    }
</style>
<div class="container ">
    <div class="card  ">
        <div class="card-header">
            <h5 class="mb-0">Create Daily Summary</h5>
          </div>
          <form method="post">
        <div class="card-body ">
            {% csrf_token %}
            <div class="card mt-0">
                <div class="card-body bg-white br-5">
                    <div class="row ">
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="id_date">Date:</label>
                                <input type="date" name="date" required class="form-control bg-light" id="id_date" tabindex="-1">   
                                <input type="hidden" name="business_profile" value={{business_profile}}>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="id_date">Cash on Hand:</label>
                                <input type="number" name="cash_on_hand" required class="form-control bg-light" id="id_cash_on_hand" tabindex="0">   
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="card">
                <div class="card-header text-white">
                    <h5 class="text-left mb-0">Sale</h5>
                </div>
                <div class="card-body bg-white br-5">
                    
                    
                    <div class="row ">
                        <div class="col-md-4">
                            <label>Cash Sale</label>
                            <input type="number" name="cash_sale" required class="form-control bg-light" id="id_cash_sale" tabindex="1"> 
                            
                            
                        </div>
                        <div class="col-md-4">
                            <label>Credit Sale</label>
                            <input type="number" name="credit_sale" required class="form-control bg-light" id="id_credit_sale" tabindex="2"> 
                        </div>
                        <div class="col-md-4">
                            <label>Card Sale</label>
                            <input type="number" name="card_sale" required class="form-control bg-light" id="id_card_sale" tabindex="3"> 
                        </div>
                    </div>
                    <div class="row mb-3 mt-2">
                        <div class="col-md-4 ">
                            <label>Bank</label>
                            <div class="bg-light p-2 rounded" >58500.00</div>
                                <input type="hidden" name="bank_sale_total" required class="form-control bg-light" id="id_bank_sale_total" > 
                        </div>
                        <div class="col-md-4 d-flex align-items-end">
                            <button type="button" class="btn btn-success mt-3" data-toggle="modal" data-target="#bankSaleModal">Add Bank Sale</button>
                        </div>
                    </div>
                    <table class="table table-bordered">
                        <thead class="thead-light">
                            <tr>
                                <th>Customer</th>
                                <th>Transaction Mode</th>
                                <th>Bank</th>
                                <th>Amount</th>
                                <th>Dep. Date</th>
                                <th>Chq. Date</th>
                                
                                <th>Chq No.</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for sale in bank_sales %}
                            <tr>
                                <td>{{ sale.customer.name }}</td>
                                <td>{{ sale.mode_of_transaction.name }}</td>
                                <td>{{ sale.bank.name }}</td>
                                <td>{{ sale.amount }}</td>
                                <td>{{ sale.created_on|date:"d/m/Y" }}</td>
                                <td>{{ sale.cheque_date|date:"d/m/Y" }}</td>
                                <td>{{ sale.cheque_no }}</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="card  mt-4">
                <div class="card-header text-white">
                    <h5 class="text-left mb-0">Credit Collection</h5>
                </div>
                <div class="card-body bg-white  br-5">
                    
                    <div class="row mb-4">
                        <div class="col-md-3">
                            <label>Cash</label>
                            <div class="bg-light p-2 rounded">16750.00</div>
                        </div>
                        <div class="col-md-3">
                            <label>Card</label>
                            <div class="bg-light p-2 rounded">15000.00</div>
                        </div>
                        <div class="col-md-3">
                            <label>Bank</label>
                            <div class="bg-light p-2 rounded">8500.00</div>
                        </div>
                        <div class="col-md-3 d-flex align-items-end">
                            <button type="button" class="btn btn-success mt-3" data-toggle="modal" data-target="#creditCollectionModal">Add Credit Collection</button>
                        </div>
                    </div>
                    <table class="table table-bordered">
                        <thead class="thead-light">
                            <tr>
                                <th>Customer</th>
                                <th>Payment Mode</th>
                                <th>Bank</th>
                                <th>Amount</th>
                                <th>Dep. Date</th>
                                <th>Chq. Date</th>
                                
                                <th>Chq No.</th>
                            </tr>
                        </thead>
                        <tbody>
                           
                            {% for creditcol in credit_collections %}
                            <tr>
                                <td>{{ creditcol.customer.name }}</td>
                                <td>{{ creditcol.payment_mode.name }}</td>
                                <td>{{ creditcol.bank.name }}</td>
                                <td>{{ creditcol.amount }}</td>
                                <td>{{ creditcol.created_on|date:"d/m/Y" }}</td>
                                <td>{{ creditcol.cheque_date|date:"d/m/Y" }}</td>
                                <td>{{ creditcol.cheque_no }}</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="card  mt-4">
                <div class="card-header text-white">
                    <h5 class="text-left mb-0">Msc. Income</h5>
                </div>
                <div class="card-body bg-white  br-5">
                    
                    <div class="row mb-4">
                        <div class="col-md-3">
                            <label>Cash</label>
                            <div class="bg-light p-2 rounded">16750.00</div>
                        </div>
                        <div class="col-md-3">
                            <label>Card</label>
                            <div class="bg-light p-2 rounded">15000.00</div>
                        </div>
                        <div class="col-md-3">
                            <label>Bank</label>
                            <div class="bg-light p-2 rounded">8500.00</div>
                        </div>
                        <div class="col-md-3 d-flex align-items-end">
                            <button type="button" class="btn btn-success mt-3" data-toggle="modal" data-target="#miscIncomeModal">Add Msc. Income</button>
                        </div>
                    </div>
                    <table class="table table-bordered">
                        <thead class="thead-light">
                            <tr>
                                <th>Income Type</th>
                                <th>Mode of Transaction</th>
                                <th>Bank</th>
                                <th>Amount</th>
                                <th>Dep. Date</th>
                                <th>Chq. Date</th>
                                
                                <th>Chq No.</th>
                            </tr>
                        </thead>
                        <tbody>
                           
                            {% for msc_incomes in msc_income %}
                            <tr>
                                <td>{{ msc_incomes.expense_type.name }}</td>
                                <td>{{ msc_incomes.mode_of_transaction.name }}</td>
                                <td>{{ msc_incomes.bank.name }}</td>
                                <td>{{ msc_incomes.amount }}</td>
                                <td>{{ msc_incomes.created_on|date:"d/m/Y" }}</td>
                                <td>{{ msc_incomes.cheque_date|date:"d/m/Y" }}</td>
                                <td>{{ msc_incomes.cheque_no }}</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <div class="card-footer mb-0">
            <div class="form-group d-flex justify-content-center align-items-center gap-3 mb-0">
                <button type="submit" class="btn btn-primary">Submit</button>
                <button type="submit" class="btn btn-warning">Save</button>
                <a href="{% url 'daily_summary_list' %}" class="btn btn-secondary">Reset</a>
            </div>
        </div>
    </form>
    </div>
</div>
<div class="container d-none">
  <div class="card">
    <div class="card-header">
      <h5 class="mb-0">Create Daily Summary</h5>
    </div>
    <form method="post">
    <div class="card-body">
      
        {% csrf_token %}
        <!-- {{ form.as_p }} -->
        <div class="row">
            
            <div class="col-md-6">
                <div class="form-group">
                    <label for="id_date">Date:</label>
                    <input type="date" name="date" required class="form-control" id="id_date" tabindex="-1">   
                </div>
            </div>
            <div class="col-md-6">
                <div class="form-group">
                    <label for="id_date">Cash on Hand:</label>
                    <input type="number" name="cash_on_hand" required class="form-control" id="id_cash_on_hand" tabindex="0">   
                </div>
            </div>

        </div>
       
      
      <!-- Buttons to trigger various modals -->
      <button type="button" class="btn btn-success mt-3" data-toggle="modal" data-target="#bankSaleModal">Add Bank Sale</button>
      <button type="button" class="btn btn-success mt-3" data-toggle="modal" data-target="#creditCollectionModal">Add Credit Collection</button>
      <button type="button" class="btn btn-success mt-3" data-toggle="modal" data-target="#miscIncomeModal">Add Miscellaneous Income</button>
      <button type="button" class="btn btn-success mt-3" data-toggle="modal" data-target="#purchaseModal">Add Purchase</button>
      <button type="button" class="btn btn-success mt-3" data-toggle="modal" data-target="#supplierPaymentModal">Add Supplier Payment</button>
      <button type="button" class="btn btn-success mt-3" data-toggle="modal" data-target="#expenseModal">Add Expense</button>
      <button type="button" class="btn btn-success mt-3" data-toggle="modal" data-target="#bankDepositModal">Add Bank Deposit</button>
    
    </div>
    <div class="card-footer mb-0">
        <div class="form-group d-flex justify-content-center align-items-center gap-3 mb-0">
            <button type="submit" class="btn btn-primary">Submit</button>
            <button type="submit" class="btn btn-warning">Save</button>
            <a href="{% url 'daily_summary_list' %}" class="btn btn-secondary">Reset</a>
        </div>
    </div>
    </form>
  </div>
</div>
{% include 'modals/bank_sale_modal.html' %}
{% include 'modals/credit_collection_modal.html' %}
{% include 'modals/msc_income_modal.html' %}
<!-- Repeat similar structure for other modals: Miscellaneous Income, Purchase, Supplier Payment, Expense, Bank Deposit -->

{% endblock %}

{% block extra_scripts %}
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.bundle.min.js"></script>
{% endblock %}
